# “OS/2”表

## 一般表信息

“OS/2”表包含 Windows 所需的一组指标。 Apple 平台并未完全使用它。
该表的格式随着时间的推移而发生变化。最初的 TrueType 规范将该表的长度设为 68 字节。第一个 OpenType 版本的长度为 78 字节，当前的 OpenType 版本甚至更大。要确定您的软件正在处理哪种类型的表，有必要考虑表的版本及其大小。

（68字节）表的布局如下表1所示。有关后续 OpenType 扩展的详细信息，请参阅 OpenType 规范。

**表 1：“OS/2”表**

|类型|名称|描述|
|-|-|-|
|uint16|版本|表版本号（设置为 0）|
|int16|xAvgCharWidth|小写字母和空格的平均加权前进宽度|
|uint16|usWeightClass|字形中笔画的视觉重量（黑度或厚度）|
|uint16|usWidthClass|与字体设计者为字体中的字形指定的正常纵横比（宽度与高度之比）的相对变化|
|int16|fsType|此字体的特征和属性（将未定义的位设置为零）|
|int16|ySubscriptXSize|建议的下标水平大小（以像素为单位）|
|int16|ySubscriptYSize|建议的下标垂直大小（以像素为单位）|
|int16|ySubscriptXOffset|建议的下标水平偏移量|
|int16|ySubscriptYOffset|建议的下标垂直偏移量（相对于基线）|
|int16|ySuperscriptXSize|建议的上标水平大小（以像素为单位）|
|int16|ySuperscriptYSize|建议的上标垂直大小（以像素为单位）|
|int16|ySuperscriptXOffset|建议的上标水平偏移量|
|int16|ySuperscriptYOffset|建议的上标垂直偏移量（相对于基线）|
|int16|yStrikeoutSize|删除线的宽度|
|int16|yStrikeoutPosition|删除线相对于基线的位置|
|int16|sFamilyClass|字体系列设计的分类。|
|PANOSE|panose|10 字节数字系列，用于描述给定字体的视觉特征
|uint32|ulUnicodeRange[4]|字段分为两个位字段，每个位字段为 96 位和 36 位。低 96 位用于指定字体文件所包含的 Unicode 块。高 32 位用于指定字体文件所涵盖的字符或脚本集。位分配待定。设置为 0
|int8|achVendID[4]|字体供应商的四个字符标识符
|uint16|fsSelection|2 字节位字段，包含有关字体模式性质的信息
|uint16|fsFirstCharIndex|此字体中的最小 Unicode 索引。
|uint16|fsLastCharIndex|此字体中的最大 Unicode 索引。

## 版本

上面记录的表的版本号为零。OpenType 当前使用的版本为五。

## 附加字段

自“OS/2”表格式的原始版本以来添加的字段包括：

|类型|名称|描述|
|-|-|-|
|int16|sTypoAscender|此字体的印刷上升部。这不一定与“hhea”表中的上升部值相同。
|int16|sTypoDescender|此字体的印刷下降部。这不一定与“hhea”表中的下降部值相同。
|int16|sTypoLineGap|此字体的印刷行距。这不一定与“hhea”表中的行距值相同。
|uint16|usWinAscent|Windows 的上升部度量。usWinAscent 计算为 Windows ANSI 字符集中所有字符的 yMax。
|uint16|usWinDescent|Windows 的下降部度量。usWinDescent 计算为 Windows ANSI 字符集中所有字符的 -yMin。
|uint32|ulCodePageRange1|位 0-31
|uint32|ulCodePageRange2|位 32-63
|int16|sxHeight|以 FUnits 为单位测量的基线与非升序小写字母的近似高度之间的距离。
|int16|sCapHeight|以 FUnits 为单位测量的基线与大写字母的近似高度之间的距离。
|uint16|usDefaultChar|Windows 显示的表示不受支持的字符的默认字符。（通常应为 0。）
|uint16|usBreakChar|Windows 使用的中断字符。
|uint16|usMaxContext|此字体中任何功能的目标字形 OpenType 上下文的最大长度。
|uint16|usLowerPointSize|建议用于版本 5 字体开始使用的最小尺寸（以印刷点的二十分之一为单位）。这是一个包含值。
|uint16|usUpperPointSize|建议用于版本 5 字体开始使用时的最大尺寸（以印刷点的二十分之一为单位）。这是一个独占值。使用 0xFFFFU 表示没有上限。

## xAvgCharWidth

xAvgCharWidth 参数指定拉丁字母表的所有 26 个小写字母和空格字符的前进宽度的算术平均值。如果 26 个小写字母中没有一个存在，则此参数应等于零。
此参数是字体的描述性属性，用于指定用于比较一种字体与另一种字体以进行选择或替换的字符间距。对于按比例间隔的字体，此值可用于估计文本行的长度。下表 2 中提供的加权因子仅适用于拉丁小写字母。如果使用其他字符集或大写字母，则应替换不同的使用频率值。在比较使用不同使用频率值进行字体映射的字体时，必须小心谨慎。平均字符宽度根据以下公式计算：

仅对于小写字母，将各个字符宽度乘以以下加权因子，然后除以 1000。

**表 2：** 权重因子

|字母|粗细|字母|粗细|
|-|-|-|-|
|a|64|o|56|
|b|14|p|17|
|c|27|q|4|
|d|35|r|49|
|e|100|s|56|
|f|20|t|71|
|g|14|u|31|
|h|42|v|10|
|i|63|w|18|
|j|3|x|3|
|k|6|y|18|
|l|35|z|2|
|m|20|space|166|
|n|56||

## usWeightClass
usWeightClass 表示字体中字符的视觉重量（黑度或笔画粗细）。下表 3 解释了此条目的可能值。

**表 3：** 视觉重量

|值|描述|
|-|-|
|1|超细|
|2|超细|
|3|细|
|4|半细|
|5|中等（正常）|
|6|半粗|
|7|粗|
|8|超粗|
|9|超粗|

## usWidthClass

usWidthClass 表示字体设计者为字体中的字形指定的正常纵横比（宽度与高度之比）的相对变化。
虽然字体中的每个字符可能具有不同的数字纵横比，但正常宽度字体中的每个字符的相对纵横比均为 1。当创建具有不同宽度类别的新字体样式时（由字体设计者或通过某种自动化方式），新字体中字符的相对纵横比会比正常字体中的相同字符大或小某个百分比，此参数指定的就是这种差异。

**表 4：** 纵横比

|值|描述|正常百分比|
|1|超压缩|50|
|2|超压缩|62.5|
|3|压缩|75|
|4|半压缩|87.5|
|5|中等（正常）|100|
|6|半膨胀|112.5|
|7|膨胀|125|
|8|超膨胀|150|
|9|超膨胀|200|

## fsType

fsType 是一个 2 字节位字段，表示字体的嵌入特性。表 5 总结了位的含义。将所有未定义的位设置为零。

**表 5：** 嵌入标志

|位|描述|
|-|-|
|0|保留；必须为 0
|1|授权（受保护）字体；如果位 2 或 3 为 1，则不应为 1。未经合法所有者许可，不得以任何方式修改、嵌入或交换仅设置了此位的字体。
|2|预览和打印嵌入；如果位 1 或 3 为 1，则不应为 1。仅设置了此位的字体可以嵌入文档中并临时加载到远程系统上。包含此类字体的文档必须以“只读”方式打开；不能对文档进行任何编辑。
|3|可编辑嵌入；如果位 1 或 2 为 1，则不应为 1。仅设置了此位的字体可以嵌入文档中并临时加载到远程系统上。包含此类字体的文档可能是可编辑的。
|4–7|保留；必须为 0
|8|无子集。设置此位时，在嵌入之前不能对字体进行子集化。位 1–3 和位 9 中指定的其他嵌入限制也适用。
|9|仅位图嵌入。设置此位时，仅可嵌入字体中包含的位图。不能嵌入任何轮廓数据。位 1-3 和位 8 中指定的其他嵌入限制也适用。
|10-15|保留；必须为 0

未经许可的字体可以封装在文档中并免费发送给其他用户。受许可协议约束的字体受法律保护或许可。未经首先确保操作符合保护协议的条款并获得保护协议持有者的许可，不得以任何方式修改或交换它们。

接下来的八个条目适用于下标和上标。两个（x 和 y 各一个）适用于大小，两个适用于下标和上标的偏移量。

**表 6：** 上标


